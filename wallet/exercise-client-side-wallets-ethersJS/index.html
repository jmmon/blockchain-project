<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple HD Wallet - Ethers.js</title>
    <link rel="stylesheet" type="text/css" href="wallet.css"/>
    <script src="lib/ethers-5.1.umd.min.js"></script>
    <script src="lib/jquery-3.1.1.min.js"></script>
    <script src="lib/jquery.qrcode.min.js"></script>
    <script src="wallet.js"></script>
</head>

<body>
<header id="menu">
    <a href="#" id="linkHome">Home</a>

    <a href="#" id="linkCreateNewWallet" class="before-login">Create New Wallet</a>
    <a href="#" id="linkOpenWallet" class="before-login">Open Existing Wallet</a>

    <a href="#" id="linkAccountBalance" class="after-login">Account Balance</a>
    <a href="#" id="linkSendTransaction" class="after-login">Send Transaction</a>
    <a href="#" id="linkShowMnemonic" class="after-login">View Mnemonic</a>
    <a href="#" id="linkLogout" class="after-login">Logout</a>
    
    <!-- testing buttons -->
    <button id="showLoggedInButtons">show logged in buttons</button>
    <button id="showLoggedOutButtons">show logged out buttons</button>
</header>

<main>
    <section id="loadingBox">Loading ...</section>

    <section id="infoBox"><header>x</header><p>Info</p></section>

    <section id="errorBox"><header>x</header><p>Error</p></section>

    <section id="viewHome">
        <h1>Simple HD Wallet using ethers.js</h1>
        Welcome to the simple wallet using <b>Ethereum Ropsten Testnet</b>.
        <ul>
            <li>The wallet is an <a href="https://en.bitcoin.it/wiki/Deterministic_wallet">HD wallet</a> kept <b>encrypted</b> in the Local Storage.</li>
            <li>Wallet can be created by a random mnemonic phrase, opened from a mnemonic phrase or opened from a JSON file, all with a provided password.</li>
            <li>By a valid password, the wallet can:
                <ul>
                    <li>Show its mnemonic phrase</li>
                    <li>Show first 5 derived addresses and their balances</li>
                    <li>Send transactions</li>
                </ul>
            </li>
            <li><a href="https://github.com/ethers-io/ethers.js/"><b>Ethers.js</b></a> - complete Ethereum wallet implementation and library in JavaScript</li>
        </ul>
    </section>

    <section id="viewCreateNewWallet">
        <h1>Create a New Wallet</h1>
        <p>Generate a new wallet: random mnemonic + password -> encrypted JSON.</p>
        <span>Enter A Password: </span><input type="password" id="passwordCreateWallet">
        <span>Retype Your Password: </span><input type="password" id="passwordRepeatCreateWallet">
        <input type="button" id="buttonGenerateNewWallet" value="Generate Now"/>
        <p>JSON:</p>
        <textarea id="textareaCreateWalletResult" class="result" readonly="true"></textarea>
    </section>

    <section id="viewOpenWalletFromMnemonic">
        <h1>Open a Wallet From Mnemonic</h1>
        <p>Open a wallet: mnemonic + password -> encrypted JSON.</p>
        <p>Enter your Mnemonic Phrase: </p>
        <textarea id="textareaOpenWallet"></textarea>
        <span>Enter password: </span><input type="password" id="passwordOpenWallet">
        <input type="button" id="buttonOpenExistingWallet" value="Open Wallet"/>
        <textarea id="textareaOpenWalletResult" class="result" readonly="true"></textarea>
    </section>

    <section id="viewShowMnemonic">
        <h1>Show Mnemonic</h1>
        <p>Shows mnemonic: password -> unlock wallet -> mnemonic</p>
        <span>Enter password: </span><input type="password" id="passwordShowMnemonic">
        <input type="button" id="buttonShowMnemonic" value="Show Mnemonic"/>
    </section>

    <section id="viewAccountBalance">
        <h1>View Account Balance</h1>
        <div>
            <div>
                <span>Address:</span><input type="text" id="addressViewAccountBalance" disabled>
            </div>
            <div>
                <span>Blockchain Node:</span><input type="text" id="nodeViewAccountBalance">
            </div>
            <input type="button" id="buttonShowAccountBalance" value="Display Balance"/>
            <div id="divAccountBalance"></div>
        </div>
    </section>


    <section id="viewSendTransaction">
        <h1>Send Transaction</h1>
        <div>
            <div>
                <span>Sender:</span><input name="address" id="senderAddress" disabled>
            </div>
            <div>
                <span>Recipient:</span><input type="text" id="recipientAddress">
            </div>
            <div>
                <span>Value:</span><input type="number" id="transferValue"/>
            </div>
            <input type="button" id="buttonSignTransaction" value="Sign Transaction">
            <textarea id="textareaSignedTransaction" class="signedTransaction" readonly="true"></textarea>
            <div>
                <span>Blockchain Node:</span><input type="text" id="transferValue">
            </div>
            <input type="button" id="buttonSendSignedTransaction" value="Send Transaction"/>
            <textarea id="textareaSendTransactionResult" class="result" readonly="true"></textarea>
        </div>
    </section>

</main>

<footer>HD Wallet Demo</footer>
</body>
</html>
